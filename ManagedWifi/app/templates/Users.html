<div class="row-fluid page-title">
    <div class="span12">

        <h1 class="content-title">Manage Device Users <span ng-show="accessPoint">for {{accessPoint}}</span></h1>
        <ul class="breadcrumb">
            <li ng-show="accessPoint"><a href="#/devices">Access Point Devices</a><span class="divider">/</span></li>
            <li ng-show="accessPoint"><a ng-href="#/device/{{apId}}">Manage {{accessPoint}}</a><span class="divider">/</span></li>
            <li class="active"><a href="#">Device Users</a></li>
        </ul>

    </div>
</div>

<div class="row-fluid">
    <div class="span12">
        <div class="page-actions">
        </div>
    </div>
</div>

<div class="row-fluid">
    <div class="span12">
        <div class="well table-tools">
            <div class="btn-toolbar">
                <div class="btn-group"><a data-toggle="dropdown" href="#" class="btn dropdown-toggle">Include columns <i class="icon-caret-down"></i></a>
                    <ul class="dropdown-menu filters">
                        <li><input type="checkbox" id="authorizedColumn" ng-model="showAuthorized"><label for="authorizedColumn">Authorized</label></li>
                        <li><input type="checkbox" id="blockedColumn" ng-model="showBlocked"><label for="blockedColumn">Blocked</label></li>
                        <li><input type="checkbox" id="apMacColumn" ng-model="showApMac"><label for="apMacColumn">Device</label></li>
                    </ul>
                </div>

                <div class="search-extensions">
                    <input type="text" placeholder="Search by name, MAC or IP..." ng-model="filter.searchables" class="search pull-right">
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row-fluid">
    <div class="span12">
        <table class="table table-striped table-condensed">
            <thead>
            <tr>
                <th><a ng-click="paginator.setOrder('hostname')">Hostname<i ng-class="paginator | sortClass:'hostname'"></i></a></th>
                <th><a ng-click="paginator.setOrder('mac')">MAC Address<i ng-class="paginator | sortClass:'mac'"></i></a></th>
                <th>
                    <div class="dropdown"><a href="#" role="button" data-toggle="dropdown" class="dropdown-toggle" ng-class="filter.essid ? 'active' : null">Network<i class="icon-filter"></i></a>
                        <ul role="menu" class="dropdown-menu">
                            <li><a ng-click="paginator.orderBy = 'essid'">Sort A-&gt;Z</a></li>
                            <li><a ng-click="paginator.orderBy = '-essid'">Sort Z-&gt;A</a></li>
                            <li class="divider"></li>
                            <li class="filters">
                                <div>
                                    <ul ng-repeat="network in networks">
                                        <li><input type="checkbox" id="net{{essid}}" ng-model="filter.essid" ng-true-value="{{network}}" ng-false-value=""><label for="net{{essid}}">{{network}}</label></li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                </th>
                <th ng-show="showApMac"><a ng-click="paginator.setOrder('ap')">Device<i ng-class="paginator | sortClass:'ap'"></i></a></th>
                <th>
                    <div class="dropdown"><a href="#" role="button" data-toggle="dropdown" class="dropdown-toggle" ng-class="filter.is_connected ? 'active' : null">Status<i class="icon-filter"></i></a>
                        <ul role="menu" class="dropdown-menu">
                            <li><a ng-click="paginator.orderBy = 'authorized'">Sort A-&gt;Z</a></li>
                            <li><a ng-click="paginator.orderBy = '-authorized'">Sort Z-&gt;A</a></li>
                            <li class="divider"></li>
                            <li class="filters">
                                <div>
                                    <ul>
                                        <li><input type="checkbox" id="connectedYes" ng-model="filter.is_connected" ng-true-value="true" ng-false-value=""><label for="connectedYes">Connected</label></li>
                                        <li><input type="checkbox" id="connectedNo" ng-model="filter.is_connected" ng-true-value="false" ng-false-value=""><label for="connectedNo">Disconnected</label></li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                </th>
                <th><a ng-click="paginator.setOrder('orderableIp')">IP<i ng-class="paginator | sortClass:'orderableIp'"></i></a></th>
                <th ng-show="showAuthorized">
                    <div class="dropdown"><a href="#" role="button" data-toggle="dropdown" class="dropdown-toggle" ng-class="filter.authorized ? 'active' : null">Authorized<i class="icon-filter"></i></a>
                        <ul role="menu" class="dropdown-menu">
                            <li><a ng-click="paginator.orderBy = 'authorized'">Sort A-&gt;Z</a></li>
                            <li><a ng-click="paginator.orderBy = '-authorized'">Sort Z-&gt;A</a></li>
                            <li class="divider"></li>
                            <li class="filters">
                                <div>
                                    <ul>
                                        <li><input type="checkbox" id="authorizedYes" ng-model="filter.authorized" ng-true-value="true" ng-false-value=""><label for="authorizedYes">Authorized</label></li>
                                        <li><input type="checkbox" id="authorizedNo" ng-model="filter.authorized" ng-true-value="false" ng-false-value=""><label for="authorizedNo">Unauthorized</label></li>
                                        <li><input type="checkbox" id="isGuest" ng-model="filter.is_guest" ng-true-value="false" ng-false-value=""><label for="isGuest">N/A</label></li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                </th>
                <th ng-show="showBlocked">
                    <div class="dropdown"><a href="#" role="button" data-toggle="dropdown" class="dropdown-toggle" ng-class="filter.blocked ? 'active' : null">Blocked<i class="icon-filter"></i></a>
                        <ul role="menu" class="dropdown-menu">
                            <li><a ng-click="paginator.orderBy = 'blocked'">Sort A-&gt;Z</a></li>
                            <li><a ng-click="paginator.orderBy = '-blocked'">Sort Z-&gt;A</a></li>
                            <li class="divider"></li>
                            <li class="filters">
                                <div>
                                    <ul>
                                        <li><input type="checkbox" ng-model="filter.blocked" ng-true-value="true" ng-false-value=""><span>Blocked</span></li>
                                        <li><input type="checkbox" ng-model="filter.blocked" ng-true-value="false" ng-false-value=""><span>Unblocked</span></li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                </th>
                <th><a ng-click="paginator.setOrder('rssi')">Signal<i ng-class="paginator | sortClass:'rssi'"></i></a></th>
                <th><a ng-click="paginator.setOrder('tx_bytes')">Download<i ng-class="paginator | sortClass:'tx_bytes'"></i></a></th>
                <th><a ng-click="paginator.setOrder('rx_bytes')">Upload<i ng-class="paginator | sortClass:'rx_bytes'"></i></a></th>
                <th><a ng-click="paginator.setOrder('uptime')">Uptime<i ng-class="paginator | sortClass:'uptime'"></i></a></th>
                <th class="no-hover"></th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="user in users | filter: filter | storeItemCount: paginator.updateTotalItems | orderBy: paginator.orderBy | slice:(paginator.currentPage-1)*20:20">
                <td>{{user.hostname}}</td>
                <td><a ng-href="#/user/{{user.id}}">{{user.mac}}</a></td>
                <td>{{user.essid}}</td>
                <td ng-show="showApMac">{{user.ap}}</td>
                <td>{{user.is_connected ? "Connected" : "Disconnected"}}</td>
                <td>{{user.ip}}</td>
                <td ng-show="showAuthorized">{{user.is_guest ? user.authorized  ?  "Authorized" : "Unauthorized" : "N/A"}}</td>
                <td ng-show="showBlocked">{{user.blocked ? "Blocked" : "Unblocked"}}</td>
                <td>{{user.rssi | signal}}</td>
                <td>{{user.tx_bytes | bytes}}</td>
                <td>{{user.rx_bytes | bytes}}</td>
                <td>{{user.uptime | uptime}}</td>
                <td>
                    <div class="dropdown settings"><a href="#" data-toggle="dropdown" class="dropdown-toggle icons"><i
                            class="icon-cog"></i><i class="icon-caret-down"></i></a>
                        <ul role="menu" aria-labelledby="dropdownMenu" class="dropdown-menu pull-right">
                            <li><a ng-click="blockUser(user)">{{user.blocked ? 'Unblock' : 'Block'}} User</a></li>
                            <li ng-show="user.is_guest"><a ng-click="authorizeUser(user)">{{user.authorized ? 'Unauthorize' : 'Authorize'}} User</a></li>
                        </ul>
                    </div>
                </td>
            </tr>

            </tbody>
        </table>
        <div class="pull-right">Showing {{(paginator.currentPage-1)*20}}-{{ paginator.currentPage*20 > paginator.totalItems ? paginator.totalItems : paginator.currentPage*20}} of {{paginator.totalItems}} </div>
        <pagination total-items="paginator.totalItems" page="paginator.currentPage" max-size="10" items-per-page="20" boundary-links="true"></pagination>

    </div>
</div>